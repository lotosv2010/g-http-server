#! /usr/bin/env node

const { version } = require('../package.json')
const Server = require('../src/server')
const yargs = require("yargs");

// 解析用户的参数
const argv = yargs
  .option("d", {
    alias: "directory",
    demand: "false",
    type: "string",
    default: process.cwd(),
    description: "请输入静态文件根目录",
  })
  .option("o", {
    alias: "host",
    demand: "false",
    type: "string",
    default: "localhost",
    description: "请输入监听的主机",
  })
  .option("p", {
    alias: "port",
    demand: "false",
    type: "number",
    default: 8088,
    description: "请输入d端口号",
  })
  .usage("g-http-server [options]")
  .example(
    "g-http-server -d / -p 9090 -o localhost",
    "在本机的9090端口上监听客户端请求"
  )
  .version(version)
  .help("h").argv;

const server = new Server(argv);
server.start();

//! 命令行中的命令指向了/usr/local/bin/g-http-server文件，而/usr/local/bin/g-http-server文件又指向了当前目录的www文件